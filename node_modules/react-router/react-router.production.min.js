import{createContext as e,useRef as t,useState as n,useLayoutEffect as r,createElement as a,useContext as l,useEffect as i,useMemo as o,useCallback as c,Children as u,isValidElement as s,Fragment as h}from"react";import{createMemoryHistory as p,Action as f,parsePath as m}from"history";function d(e,t){if(!e)throw new Error(t)}const g=e(null),v=e({static:!1}),x=e({outlet:null,params:{},pathname:"",basename:"",route:null});function y({children:e,initialEntries:l,initialIndex:i}){let o=t();null==o.current&&(o.current=p({initialEntries:l,initialIndex:i}));let c=o.current,[u,s]=n({action:c.action,location:c.location});return r(()=>c.listen(s),[c]),a(S,{children:e,action:u.action,location:u.location,navigator:c})}function b({to:e,replace:t,state:n}){C()||d(!1);let r=R();return i(()=>{r(e,{replace:t,state:n})}),null}function E(e){return U()}function P(e){d(!1)}function S({children:e=null,action:t=f.Pop,location:n,navigator:r,static:l=!1}){return C()&&d(!1),a(g.Provider,{value:r},a(v.Provider,{children:e,value:{action:t,location:n,static:l}}))}function w({basename:e="",children:t,location:n}){return F(L(t),{location:n,basename:e})}function W(e,t=!0){C()||d(!1);let n=l(g);i(()=>{if(!t)return;let r=n.block(t=>{let n={...t,retry(){r(),t.retry()}};e(n)});return r},[n,e,t])}function $(e){C()||d(!1);let t=l(g),n=A(e);return t.createHref(n)}function C(){return null!=l(v).location}function I(){return C()||d(!1),l(v).location}function N(e){return C()||d(!1),q(e,I().pathname)}function R(){C()||d(!1);let e=l(g),{basename:n,pathname:r}=l(x),{pathname:a}=I(),o=t(!1);return i(()=>{o.current=!0}),c((t,l={})=>{if(o.current)if("number"==typeof t)e.go(t);else{let i=z(t,(""===t||""===t.pathname?"/":"string"==typeof t?m(t).pathname:t.pathname)?r:a,n);(l.replace?e.replace:e.push)(i,l.state)}},[n,e,r,a])}function U(){return l(x).outlet}function j(){return l(x).params}function A(e){let{pathname:t,basename:n}=l(x);return o(()=>z(e,t,n),[e,t,n])}function F(e,{basename:t="",location:n}={}){C()||d(!1);let{route:r,pathname:i,params:c}=l(x),u=I(),s=null!=n?n:u,h=t?D([i,t]):i,p=o(()=>_(e,s,h),[e,s,h]);if(!p)return null;let f=Object.assign({},c);return p.reduceRight((e,n)=>(Object.assign(f,n.params),a(x.Provider,{children:n.route.element||a(E,null),value:{outlet:e,params:f,pathname:D([h,n.pathname]),basename:t,route:n.route}})),null)}function L(e){let t=[];return u.forEach(e,e=>{if(!s(e))return;if(e.type===h)return void t.push.apply(t,L(e.props.children));let n={path:e.props.path,caseSensitive:e.props.caseSensitive,index:e.props.index,element:e.props.element};e.props.children&&(n.children=L(e.props.children)),t.push(n)}),t}function M(e,t={}){return e.replace(/:(\w+)/g,(e,n)=>(null==t[n]&&d(!1),t[n])).replace(/\/*\*$/,e=>null==t["*"]?"":t["*"].replace(/^\/*/,"/"))}function _(e,t,n=""){"string"==typeof t&&(t=m(t));let r=t.pathname||"/";if(n){let e=n.replace(/^\/*/,"/").replace(/\/+$/,"");if(!r.toLowerCase().startsWith(e.toLowerCase()))return null;r=r.slice(e.length)||"/"}let a=function e(t,n=[],r=[],a=""){return t.forEach((t,l)=>{let i={relativePath:t.path||"",caseSensitive:!0===t.caseSensitive,childrenIndex:l};i.relativePath.startsWith("/")&&(i.relativePath.startsWith(a)||d(!1),i.relativePath=i.relativePath.slice(a.length));let o=D([a,i.relativePath]),c=r.concat(i);t.children&&t.children.length>0&&(!0===t.index&&d(!1),e(t.children,n,c,o)),n.push({path:o,routesMeta:c})}),n}(e);!function(e){let t={},n={};e.forEach(({path:e,routesMeta:r})=>{t[e]=function(e){let t=e.split("/"),n=t.length;t.some(k)&&(n+=-2);return t.filter(e=>!k(e)).reduce((e,t)=>e+(O.test(t)?2:""===t?1:10),n)}(e),n[e]=r.map(e=>e.childrenIndex)}),e.sort((e,r)=>{let a=t[e.path],l=t[r.path];return a!==l?l-a:function(e,t){return e.length===t.length&&e.slice(0,-1).every((e,n)=>e===t[n])?e[e.length-1]-t[t.length-1]:0}(n[e.path],n[r.path])})}(a);let l=null;for(let i=0;null==l&&i<a.length;++i)l=H(a[i],r,e);return l}const O=/^:\w+$/,k=e=>"*"===e;function H(e,t,n){let r="/",a={},{routesMeta:l}=e,i=n,o=[];for(let c=0;c<l.length;++c){let e=l[c],n="/"===r?t:t.slice(r.length)||"/",u=q({path:e.relativePath,caseSensitive:e.caseSensitive,end:c===l.length-1},n);if(!u)return null;a={...a,...u.params},r=D([r,u.pathname]);let s=i[e.childrenIndex];o.push({params:a,pathname:r,route:s}),i=s.children}return o}function q(e,t){"string"==typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=function(e,t=!1,n=!0){let r=[],a="^("+e.replace(/^\/*/,"/").replace(/\/?\*?$/,"").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/:(\w+)/g,(e,t)=>(r.push(t),"([^\\/]+)"))+")";e.endsWith("*")?(e.endsWith("/*")?a+="(?:\\/(.+)|\\/?)":a+="(.*)",r.push("*")):n&&(a+="\\/?");n&&(a+="$");let l=t?void 0:"i";return[new RegExp(a,l),r]}(e.path,e.caseSensitive,e.end),a=t.match(n);if(!a)return null;let l=a[1],i=a.slice(2);return{params:r.reduce((e,t,n)=>(e[t]=function(e,t){try{return decodeURIComponent(e)}catch(n){return e}}(i[n]||""),e),{}),pathname:l,pattern:e}}function z(e,t="/",n=""){let{pathname:r,search:a="",hash:l=""}="string"==typeof e?m(e):e;return{pathname:r?function(e,t){let n=G((r=t,r.replace(/\/+$/,"")));var r;return G(e).forEach(e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)}),n.length>1?D(n):"/"}(r,r.startsWith("/")?n?B("/"+n):"/":t):t,search:J(a),hash:K(l)}}const B=e=>e.replace(/\/\/+/g,"/"),D=e=>B(e.join("/")),G=e=>B(e).split("/"),J=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",K=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";export{y as MemoryRouter,b as Navigate,E as Outlet,P as Route,S as Router,w as Routes,v as UNSAFE_LocationContext,g as UNSAFE_NavigatorContext,x as UNSAFE_RouteContext,L as createRoutesFromChildren,M as generatePath,q as matchPath,_ as matchRoutes,z as resolvePath,W as useBlocker,$ as useHref,C as useInRouterContext,I as useLocation,N as useMatch,R as useNavigate,U as useOutlet,j as useParams,A as useResolvedPath,F as useRoutes};
//# sourceMappingURL=react-router.production.min.js.map
