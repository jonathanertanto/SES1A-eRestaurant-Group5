!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("react"),require("history")):"function"==typeof define&&define.amd?define(["exports","react","history"],t):t((e=e||self).ReactRouter={},e.React,e.HistoryLibrary)}(this,(function(e,t,n){"use strict";function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function a(e,t){if(!e)throw new Error(t)}const i=t.createContext(null),o=t.createContext({static:!1}),l=t.createContext({outlet:null,params:{},pathname:"",basename:"",route:null});function u(e){return f()}function c(e){let{children:r=null,action:l=n.Action.Pop,location:u,navigator:c,static:h=!1}=e;return s()&&a(!1),t.createElement(i.Provider,{value:c},t.createElement(o.Provider,{children:r,value:{action:l,location:u,static:h}}))}function s(){return null!=t.useContext(o).location}function h(){return s()||a(!1),t.useContext(o).location}function p(){s()||a(!1);let e=t.useContext(i),{basename:r,pathname:o}=t.useContext(l),{pathname:u}=h(),c=t.useRef(!1);return t.useEffect(()=>{c.current=!0}),t.useCallback((function(t,a){if(void 0===a&&(a={}),c.current)if("number"==typeof t)e.go(t);else{let i=P(t,(""===t||""===t.pathname?"/":"string"==typeof t?n.parsePath(t).pathname:t.pathname)?o:u,r);(a.replace?e.replace:e.push)(i,a.state)}}),[r,e,o,u])}function f(){return t.useContext(l).outlet}function d(e){let{pathname:n,basename:r}=t.useContext(l);return t.useMemo(()=>P(e,n,r),[e,n,r])}function m(e,n){let{basename:r="",location:i}=void 0===n?{}:n;s()||a(!1);let{route:o,pathname:c,params:p}=t.useContext(l),f=h(),d=null!=i?i:f,m=r?b([c,r]):c,v=t.useMemo(()=>g(e,d,m),[e,d,m]);if(!v)return null;let x=Object.assign({},p);return v.reduceRight((e,n)=>(Object.assign(x,n.params),t.createElement(l.Provider,{children:n.route.element||t.createElement(u,null),value:{outlet:e,params:x,pathname:b([m,n.pathname]),basename:r,route:n.route}})),null)}function v(e){let n=[];return t.Children.forEach(e,e=>{if(!t.isValidElement(e))return;if(e.type===t.Fragment)return void n.push.apply(n,v(e.props.children));let r={path:e.props.path,caseSensitive:e.props.caseSensitive,index:e.props.index,element:e.props.element};e.props.children&&(r.children=v(e.props.children)),n.push(r)}),n}function g(e,t,r){void 0===r&&(r=""),"string"==typeof t&&(t=n.parsePath(t));let i=t.pathname||"/";if(r){let e=r.replace(/^\/*/,"/").replace(/\/+$/,"");if(!i.toLowerCase().startsWith(e.toLowerCase()))return null;i=i.slice(e.length)||"/"}let o=function e(t,n,r,i){void 0===n&&(n=[]);void 0===r&&(r=[]);void 0===i&&(i="");return t.forEach((t,o)=>{let l={relativePath:t.path||"",caseSensitive:!0===t.caseSensitive,childrenIndex:o};l.relativePath.startsWith("/")&&(l.relativePath.startsWith(i)||a(!1),l.relativePath=l.relativePath.slice(i.length));let u=b([i,l.relativePath]),c=r.concat(l);t.children&&t.children.length>0&&(!0===t.index&&a(!1),e(t.children,n,c,u)),n.push({path:u,routesMeta:c})}),n}(e);!function(e){let t={},n={};e.forEach(e=>{let{path:r,routesMeta:a}=e;t[r]=function(e){let t=e.split("/"),n=t.length;t.some(y)&&(n+=-2);return t.filter(e=>!y(e)).reduce((e,t)=>e+(x.test(t)?2:""===t?1:10),n)}(r),n[r]=a.map(e=>e.childrenIndex)}),e.sort((e,r)=>{let a=t[e.path],i=t[r.path];return a!==i?i-a:function(e,t){return e.length===t.length&&e.slice(0,-1).every((e,n)=>e===t[n])?e[e.length-1]-t[t.length-1]:0}(n[e.path],n[r.path])})}(o);let l=null;for(let t=0;null==l&&t<o.length;++t)l=C(o[t],i,e);return l}const x=/^:\w+$/,y=e=>"*"===e;function C(e,t,n){let a="/",i={},{routesMeta:o}=e,l=n,u=[];for(let e=0;e<o.length;++e){let n=o[e],c="/"===a?t:t.slice(a.length)||"/",s=E({path:n.relativePath,caseSensitive:n.caseSensitive,end:e===o.length-1},c);if(!s)return null;i=r({},i,s.params),a=b([a,s.pathname]);let h=l[n.childrenIndex];u.push({params:i,pathname:a,route:h}),l=h.children}return u}function E(e,t){"string"==typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);let r=[],a="^("+e.replace(/^\/*/,"/").replace(/\/?\*?$/,"").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/:(\w+)/g,(e,t)=>(r.push(t),"([^\\/]+)"))+")";e.endsWith("*")?(e.endsWith("/*")?a+="(?:\\/(.+)|\\/?)":a+="(.*)",r.push("*")):n&&(a+="\\/?");n&&(a+="$");let i=t?void 0:"i";return[new RegExp(a,i),r]}(e.path,e.caseSensitive,e.end),a=t.match(n);if(!a)return null;let i=a[1],o=a.slice(2);return{params:r.reduce((e,t,n)=>(e[t]=function(e,t){try{return decodeURIComponent(e)}catch(t){return e}}(o[n]||""),e),{}),pathname:i,pattern:e}}function P(e,t,r){void 0===t&&(t="/"),void 0===r&&(r="");let{pathname:a,search:i="",hash:o=""}="string"==typeof e?n.parsePath(e):e;return{pathname:a?function(e,t){let n=S((r=t,r.replace(/\/+$/,"")));var r;return S(e).forEach(e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)}),n.length>1?b(n):"/"}(a,a.startsWith("/")?r?R("/"+r):"/":t):t,search:w(i),hash:M(o)}}const R=e=>e.replace(/\/\/+/g,"/"),b=e=>R(e.join("/")),S=e=>R(e).split("/"),w=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",M=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";e.MemoryRouter=function(e){let{children:r,initialEntries:a,initialIndex:i}=e,o=t.useRef();null==o.current&&(o.current=n.createMemoryHistory({initialEntries:a,initialIndex:i}));let l=o.current,[u,s]=t.useState({action:l.action,location:l.location});return t.useLayoutEffect(()=>l.listen(s),[l]),t.createElement(c,{children:r,action:u.action,location:u.location,navigator:l})},e.Navigate=function(e){let{to:n,replace:r,state:i}=e;s()||a(!1);let o=p();return t.useEffect(()=>{o(n,{replace:r,state:i})}),null},e.Outlet=u,e.Route=function(e){a(!1)},e.Router=c,e.Routes=function(e){let{basename:t="",children:n,location:r}=e;return m(v(n),{location:r,basename:t})},e.UNSAFE_LocationContext=o,e.UNSAFE_NavigatorContext=i,e.UNSAFE_RouteContext=l,e.createRoutesFromChildren=v,e.generatePath=function(e,t){return void 0===t&&(t={}),e.replace(/:(\w+)/g,(e,n)=>(null==t[n]&&a(!1),t[n])).replace(/\/*\*$/,e=>null==t["*"]?"":t["*"].replace(/^\/*/,"/"))},e.matchPath=E,e.matchRoutes=g,e.resolvePath=P,e.useBlocker=function(e,n){void 0===n&&(n=!0),s()||a(!1);let o=t.useContext(i);t.useEffect(()=>{if(!n)return;let t=o.block(n=>{let a=r({},n,{retry(){t(),n.retry()}});e(a)});return t},[o,e,n])},e.useHref=function(e){s()||a(!1);let n=t.useContext(i),r=d(e);return n.createHref(r)},e.useInRouterContext=s,e.useLocation=h,e.useMatch=function(e){return s()||a(!1),E(e,h().pathname)},e.useNavigate=p,e.useOutlet=f,e.useParams=function(){return t.useContext(l).params},e.useResolvedPath=d,e.useRoutes=m,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=react-router.production.min.js.map
